{% extends 'base.html.twig' %}

{% block title %}üöÄ Space Info{% endblock %}

{% block body %}
<style>
    body { background-color: #252537; color: #FFF; }
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    .example-wrapper2 { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    #mapid { height: 180px; }

</style>

<div class="example-wrapper">
    <h1>Who's in Space? üë©‚ÄçüöÄüåå‚Äç</h1>

    Current astronauts in space:
    <ul>
      {% for astronaut in astronauts %}
        üå† {{ astronaut.name|e }}
        <br />
      {% endfor %}
    </ul>
</div>
<div class="example-wrapper2">
    Current location of the International Space Station (ISS)

    {# Need to pass in the PHP data not the JS URL to the api request #}
    <div id="map" style="width: 600px; height: 400px;">
        <script>
        var map = L.map('map').setView([0,0], 2);

        function moveISS () {
          $.getJSON('http://api.open-notify.org/iss-now.json?callback=?', function(data) {
              var lat = data['iss_position']['latitude'];
              var lon = data['iss_position']['longitude'];

              iss.setLatLng([lat, lon]);
              map.panTo([lat, lon], animate=true);
          });
          setTimeout(moveISS, 5000);
        }

        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
          attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery ¬© <a href="https://www.mapbox.com/">Mapbox</a>',
          maxZoom: 18,
          id: 'mapbox/streets-v11',
          accessToken: 'pk.eyJ1Ijoia2F0ZWZpc2giLCJhIjoiY2szdTlodWM3MDl0eTNlcGkzd291eGJwaCJ9.YxgUp42TE-yviWQbmOv1Xg'
        }).addTo(map);

        var ISSIcon = L.icon({
          iconUrl: 'https://img.icons8.com/android/24/000000/rocket.png',
          iconAnchor: [25, 15],
          popupAnchor: [50, 25]
        });

        var iss = L.marker([0, 0], {
          icon: ISSIcon
        }).addTo(map);

        moveISS();

        </script>
      </div>

</div>
{% endblock %}
